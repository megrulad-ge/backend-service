<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>@megrulad-ge/backend-service documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top d-block d-sm-none">
            <a href="../" class="navbar-brand">@megrulad-ge/backend-service documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content miscellaneous-variables">
                   <div class="content-data">


















<ol class="breadcrumb">
  <li class="breadcrumb-item">Miscellaneous</li>
  <li class="breadcrumb-item">Variables</li>
</ol>

<section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <ul class="index-list">
                        <li>
                            <a href="#bootstrap" title="src/common/bootstrap/bootstrap.ts" ><b>bootstrap</b>&nbsp;&nbsp;&nbsp;(src/.../bootstrap.ts)</a>
                        </li>
                        <li>
                            <a href="#commonConfiguration" title="src/common/setup/config/orm.config.ts" ><b>commonConfiguration</b>&nbsp;&nbsp;&nbsp;(src/.../orm.config.ts)</a>
                        </li>
                        <li>
                            <a href="#configureOrigin" title="src/common/bootstrap/configure-origin.ts" ><b>configureOrigin</b>&nbsp;&nbsp;&nbsp;(src/.../configure-origin.ts)</a>
                        </li>
                        <li>
                            <a href="#CtxLogger" title="src/common/decorators/ctx-logger.decorator.ts" ><b>CtxLogger</b>&nbsp;&nbsp;&nbsp;(src/.../ctx-logger.decorator.ts)</a>
                        </li>
                        <li>
                            <a href="#development" title="src/common/setup/config/orm.config.ts" ><b>development</b>&nbsp;&nbsp;&nbsp;(src/.../orm.config.ts)</a>
                        </li>
                        <li>
                            <a href="#driver" title="src/common/setup/config/orm.config.ts" ><b>driver</b>&nbsp;&nbsp;&nbsp;(src/.../orm.config.ts)</a>
                        </li>
                        <li>
                            <a href="#getConfig" title="src/common/setup/config/orm.config.ts" ><b>getConfig</b>&nbsp;&nbsp;&nbsp;(src/.../orm.config.ts)</a>
                        </li>
                        <li>
                            <a href="#production" title="src/common/setup/config/orm.config.ts" ><b>production</b>&nbsp;&nbsp;&nbsp;(src/.../orm.config.ts)</a>
                        </li>
                        <li>
                            <a href="#randomFromArray" title="src/common/utils/utils.ts" ><b>randomFromArray</b>&nbsp;&nbsp;&nbsp;(src/.../utils.ts)</a>
                        </li>
                        <li>
                            <a href="#resolveEntityPath" title="src/common/setup/config/config.utils.ts" ><b>resolveEntityPath</b>&nbsp;&nbsp;&nbsp;(src/.../config.utils.ts)</a>
                        </li>
                        <li>
                            <a href="#saveSwaggerDocument" title="src/common/bootstrap/swagger-save.ts" ><b>saveSwaggerDocument</b>&nbsp;&nbsp;&nbsp;(src/.../swagger-save.ts)</a>
                        </li>
                        <li>
                            <a href="#subscribeNodeSignals" title="src/common/bootstrap/signals.ts" ><b>subscribeNodeSignals</b>&nbsp;&nbsp;&nbsp;(src/.../signals.ts)</a>
                        </li>
                        <li>
                            <a href="#swaggerConfig" title="src/common/bootstrap/swagger-config.ts" ><b>swaggerConfig</b>&nbsp;&nbsp;&nbsp;(src/.../swagger-config.ts)</a>
                        </li>
                        <li>
                            <a href="#unitTest" title="src/common/setup/config/orm.config.ts" ><b>unitTest</b>&nbsp;&nbsp;&nbsp;(src/.../orm.config.ts)</a>
                        </li>
                        <li>
                            <a href="#UserAgent" title="src/common/decorators/user-agent.decorator.ts" ><b>UserAgent</b>&nbsp;&nbsp;&nbsp;(src/.../user-agent.decorator.ts)</a>
                        </li>
                        <li>
                            <a href="#validationOptions" title="src/common/validations/env-validation.schema.ts" ><b>validationOptions</b>&nbsp;&nbsp;&nbsp;(src/.../env-validation.schema.ts)</a>
                        </li>
                    </ul>
                </td>
            </tr>
        </tbody>
    </table>
</section>

    <h3>src/common/bootstrap/bootstrap.ts</h3>
    <section data-compodoc="block-properties">
    <h3></h3>    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="bootstrap"></a>
                    <span class="name">
                        <span ><b>bootstrap</b></span>
                        <a href="#bootstrap"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>async () &#x3D;&gt; {
  const app &#x3D; await NestFactory.create(AppModule);
  const loggerService &#x3D; new Logger(&#x27;Bootstrap&#x27;);
  const configService &#x3D; app.get(ConfigService);
  subscribeNodeSignals(loggerService);
  app.enableCors({
    origin: configureOrigin,
    methods: &#x27;GET,POST,PUT,PATCH,DELETE,OPTIONS&#x27;,
    allowedHeaders: &#x27;Authorization, Content-Type, Accept&#x27;,
    exposedHeaders: &#x27;Authorization, Content-Type&#x27;,
    credentials: true,
  });
  app.useLogger(loggerService);
  app.useGlobalPipes(
    new ValidationPipe({
      transform: true,
      whitelist: true,
      forbidNonWhitelisted: true,
    }),
  );
  app.useGlobalInterceptors(
    new RequestInterceptor(), // Important to be 1st, {CtxLogger} is injected here
    new ExceptionInterceptor(),
    new ClassSerializerInterceptor(app.get(Reflector)), // To make sure @Exclude() works on responses
  );
  app.setGlobalPrefix(&#x27;/api&#x27;);
  app.enableVersioning({
    prefix: &#x27;v&#x27;,
    type: VersioningType.URI,
    defaultVersion: &#x27;1&#x27;,
  });

  const document &#x3D; SwaggerModule.createDocument(app, swaggerConfig);
  saveSwaggerDocument(document);
  SwaggerModule.setup(&#x27;docs&#x27;, app, document, {
    swaggerOptions: {
      persistAuthorization: true,
    },
  });
  const appPort &#x3D; parseInt(configService.get(&#x27;PORT&#x27;), 10);
  app.getHttpAdapter().getInstance().disable(&#x27;x-powered-by&#x27;);
  await app.listen(appPort, &#x27;0.0.0.0&#x27;, async () &#x3D;&gt; {
    const url &#x3D; await app.getUrl();
    const devText &#x3D; bold(&#x60;
        Backend service started at: ${url}
        Swagger docs: ${url}/docs
        Mode: ${bgCyan(Env.NodeEnv)}
        Pid: ${process.pid}
    &#x60;);
    if (Env.isDev) return console.log(devText);

    loggerService.log(&#x60;Application started at: ${url}&#x60;, &#x27;Bootstrap&#x27;);
  });
}</code>
                    </td>
                </tr>


        </tbody>
    </table>
</section>
    <h3>src/common/setup/config/orm.config.ts</h3>
    <section data-compodoc="block-properties">
    <h3></h3>    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="commonConfiguration"></a>
                    <span class="name">
                        <span ><b>commonConfiguration</b></span>
                        <a href="#commonConfiguration"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>TypeOrmModuleOptions</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>{
  port: Number(process.env.DB_PORT),
  username: process.env.DB_USERNAME,
  password: process.env.DB_PASSWORD,
  host: process.env.DB_HOST,
  entities: [resolveEntityPath()],
}</code>
                    </td>
                </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="development"></a>
                    <span class="name">
                        <span ><b>development</b></span>
                        <a href="#development"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>{
  ...commonConfiguration,
  database: process.env.DB_DATABASE,
  type: driver,
  logging: &#x27;all&#x27;,
} as TypeOrmModuleOptions</code>
                    </td>
                </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="driver"></a>
                    <span class="name">
                        <span ><b>driver</b></span>
                        <a href="#driver"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;mysql&#x27;</code>
                    </td>
                </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getConfig"></a>
                    <span class="name">
                        <span ><b>getConfig</b></span>
                        <a href="#getConfig"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>() &#x3D;&gt; {
  if (Env.isProd) return production;
  if (Env.isDev) return development;
  if (Env.isTest) return unitTest;

  throw new Error(&#x27;Unknown environment&#x27;);
}</code>
                    </td>
                </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="production"></a>
                    <span class="name">
                        <span ><b>production</b></span>
                        <a href="#production"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>{
  ...commonConfiguration,
  database: process.env.DB_DATABASE,
  type: driver,
  logging: [&#x27;error&#x27;],
} as TypeOrmModuleOptions</code>
                    </td>
                </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="unitTest"></a>
                    <span class="name">
                        <span ><b>unitTest</b></span>
                        <a href="#unitTest"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>{
  ...commonConfiguration,
  database: &#x27;:memory:&#x27;,
  type: &#x27;sqlite&#x27;,
  synchronize: true, // Create tables from entities
  logging: false,
} as TypeOrmModuleOptions</code>
                    </td>
                </tr>


        </tbody>
    </table>
</section>
    <h3>src/common/bootstrap/configure-origin.ts</h3>
    <section data-compodoc="block-properties">
    <h3></h3>    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="configureOrigin"></a>
                    <span class="name">
                        <span ><b>configureOrigin</b></span>
                        <a href="#configureOrigin"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>CustomOrigin</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>(requestOrigin, callback) &#x3D;&gt; {
  const corsWhitelist &#x3D; process.env.ORIGIN.split(&#x27;,&#x27;);
  const originNotDefined &#x3D; !requestOrigin;
  const isWhitelisted &#x3D; corsWhitelist.indexOf(requestOrigin) !&#x3D;&#x3D; -1;
  const isLocalhost &#x3D; new RegExp(/^https?:\/\/(localhost|127.0.0.1)/).test(requestOrigin);
  const isMegrulad &#x3D; new RegExp(/^https?:\/\/(.*)\.megrulad\.ge/).test(requestOrigin);
  const corsAllowed &#x3D; originNotDefined || isLocalhost || isWhitelisted || isMegrulad;

  if (corsAllowed) return callback(null, true);
  callback(new CorsException(&#x60;Origin [${requestOrigin}] Not allowed by CORS&#x60;));
}</code>
                    </td>
                </tr>


        </tbody>
    </table>
</section>
    <h3>src/common/decorators/ctx-logger.decorator.ts</h3>
    <section data-compodoc="block-properties">
    <h3></h3>    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="CtxLogger"></a>
                    <span class="name">
                        <span ><b>CtxLogger</b></span>
                        <a href="#CtxLogger"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>createParamDecorator((data: unknown, ctx: ExecutionContext): Logger &#x3D;&gt; {
  return ctx.switchToHttp().getRequest().logger as Logger;
})</code>
                    </td>
                </tr>


        </tbody>
    </table>
</section>
    <h3>src/common/utils/utils.ts</h3>
    <section data-compodoc="block-properties">
    <h3></h3>    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="randomFromArray"></a>
                    <span class="name">
                        <span ><b>randomFromArray</b></span>
                        <a href="#randomFromArray"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&lt;T &#x3D; any&gt;(array: T[]) &#x3D;&gt; {
  return array[Math.floor(Math.random() * array.length)];
}</code>
                    </td>
                </tr>


        </tbody>
    </table>
</section>
    <h3>src/common/setup/config/config.utils.ts</h3>
    <section data-compodoc="block-properties">
    <h3></h3>    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="resolveEntityPath"></a>
                    <span class="name">
                        <span ><b>resolveEntityPath</b></span>
                        <a href="#resolveEntityPath"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>() &#x3D;&gt; {
  // Env for unit tests
  if (Env.isTest) return &#x27;src/**/*.entity.ts&#x27;;

  // Env is NodeEnv.PRODUCTION but for E2E tests
  if (Env.isE2E) return &#x27;src/**/*.entity.ts&#x27;;

  // Either NodeEnv.PRODUCTION or NodeEnv.DEVELOPMENT
  return &#x27;dist/src/**/*.entity.js&#x27;;
}</code>
                    </td>
                </tr>


        </tbody>
    </table>
</section>
    <h3>src/common/bootstrap/swagger-save.ts</h3>
    <section data-compodoc="block-properties">
    <h3></h3>    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="saveSwaggerDocument"></a>
                    <span class="name">
                        <span ><b>saveSwaggerDocument</b></span>
                        <a href="#saveSwaggerDocument"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>(document: OpenAPIObject) &#x3D;&gt; {
  try {
    const swaggerYaml &#x3D; yaml.dump(document, { skipInvalid: true });
    fs.writeFileSync(&#x27;./docs/swagger.yaml&#x27;, swaggerYaml, &#x27;utf8&#x27;);
  } catch (error) {
    Logger.error(&#x60;Error while writing swagger.yaml file: ${error}&#x60;, &#x27;Bootstrap&#x27;);
  }
}</code>
                    </td>
                </tr>


        </tbody>
    </table>
</section>
    <h3>src/common/bootstrap/signals.ts</h3>
    <section data-compodoc="block-properties">
    <h3></h3>    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="subscribeNodeSignals"></a>
                    <span class="name">
                        <span ><b>subscribeNodeSignals</b></span>
                        <a href="#subscribeNodeSignals"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>(logger: LoggerService) &#x3D;&gt; {
  const signalsNames: NodeJS.Signals[] &#x3D; [&#x27;SIGTERM&#x27;, &#x27;SIGINT&#x27;, &#x27;SIGHUP&#x27;];

  signalsNames.forEach((signalName) &#x3D;&gt;
    process.on(signalName, (signal) &#x3D;&gt; {
      logger.log(&#x60;Retrieved signal: ${signal}, application terminated&#x60;, &#x27;Bootstrap&#x27;);
      process.exit(0);
    }),
  );

  process.on(&#x27;uncaughtException&#x27;, (error: Error) &#x3D;&gt; {
    logger.error({ error }, &#x27;Bootstrap&#x27;);
    process.exit(1);
  });

  process.on(&#x27;unhandledRejection&#x27;, (reason, promise) &#x3D;&gt; {
    logger.error(&#x60;Unhandled Promise Rejection, reason: ${reason}&#x60;, &#x27;Bootstrap&#x27;);
    promise.catch((error: Error) &#x3D;&gt; {
      logger.error({ error });
      process.exit(1);
    });
  });
}</code>
                    </td>
                </tr>


        </tbody>
    </table>
</section>
    <h3>src/common/bootstrap/swagger-config.ts</h3>
    <section data-compodoc="block-properties">
    <h3></h3>    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="swaggerConfig"></a>
                    <span class="name">
                        <span ><b>swaggerConfig</b></span>
                        <a href="#swaggerConfig"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new DocumentBuilder()
  .addBearerAuth({
    type: &#x27;http&#x27;,
    scheme: &#x27;bearer&#x27;,
    bearerFormat: &#x27;JWT&#x27;,
    name: &#x27;JWT&#x27;,
    description: &#x27;Enter JWT auth token&#x27;,
    in: &#x27;header&#x27;,
  })
  .setTitle(&#x27;Megrulad.ge Backend Service&#x27;)
  .setDescription(&#x27;Main translation backend service&#x27;)
  .setVersion(packageJson.version)
  .build()</code>
                    </td>
                </tr>


        </tbody>
    </table>
</section>
    <h3>src/common/decorators/user-agent.decorator.ts</h3>
    <section data-compodoc="block-properties">
    <h3></h3>    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="UserAgent"></a>
                    <span class="name">
                        <span ><b>UserAgent</b></span>
                        <a href="#UserAgent"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>createParamDecorator((data: unknown, ctx: ExecutionContext): string &#x3D;&gt; {
  return ctx.switchToHttp().getRequest().get(&#x27;user-agent&#x27;);
})</code>
                    </td>
                </tr>


        </tbody>
    </table>
</section>
    <h3>src/common/validations/env-validation.schema.ts</h3>
    <section data-compodoc="block-properties">
    <h3></h3>    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="validationOptions"></a>
                    <span class="name">
                        <span ><b>validationOptions</b></span>
                        <a href="#validationOptions"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/object" target="_blank" >object</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>{
  abortEarly: false,
  allowUnknown: true,
}</code>
                    </td>
                </tr>


        </tbody>
    </table>
</section>



                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'miscellaneous-variables';
            var COMPODOC_CURRENT_PAGE_URL = 'variables.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
